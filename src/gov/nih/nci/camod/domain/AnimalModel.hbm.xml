<?xml version="1.0" encoding="UTF-8"?>

<!--
    Document   : AnimalModel.hbm.xml
    Created on : May 4, 2005
    Author     : rajputs
    Description: Hibernate mapping file for AnimalModel
-->

<!DOCTYPE hibernate-mapping PUBLIC 
	"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="gov.nih.nci.camod.domain">
	<subclass name="AnimalModel" 
    	extends="AbstractCancerModel"
    	discriminator-value="AM"
        lazy="true">	    
	    
	    <!-- url -->
        <property name="url" 
        	column="url" 
        	type="string"/>
        	
        <!-- isToolMouse -->
        <property name="isToolMouse" 
        	column="is_tool_mouse" 
        	type="boolean"/>
        	
        <!-- logCollection (one-to-many bidirectional) -->
        <set name="logCollection"
	         cascade="all">
            <key column="abs_cancer_model_id"/>
            <one-to-many class="Log"/>
        </set>
        
        <!-- cellLineCollection (one-to-many unidirectional) -->
        <bag name="cellLineCollection" 
        	table="ani_mod_cell_line"
        	inverse="false" 
        	lazy="true" 
        	cascade="all-delete-orphan">
        	
        	<key column="abs_cancer_model_id"/>
        	<many-to-many column="cell_line_id"
            	unique="true"
            	class="CellLine"/>
        </bag>
        
        <!-- spontaneousMutationCollection (one-to-many unidirectional) -->
        <bag name="spontaneousMutationCollection" 
        	table="ani_mod_spon_mutation"
        	inverse="false" 
        	lazy="true" 
        	cascade="all-delete-orphan">
        	        	
        	<key column="abs_cancer_model_id"/>
        	<many-to-many column="spontaneous_mutation_id"
            	unique="true"
            	class="SpontaneousMutation"/>
        </bag>        
        
        <!-- imageCollection (one-to-many unidirectional) -->
        <bag name="imageCollection" 
        	table="animal_model_image"
        	inverse="false" 
        	lazy="true" 
        	cascade="all-delete-orphan">
        	
        	<key column="abs_cancer_model_id"/>
        	<many-to-many column="image_id"
            	unique="true"
            	class="Image"/>
        </bag>
        
        <!-- microArrayDataCollection (one-to-many unidirectional) -->
        <bag name="microArrayDataCollection" 
        	table="ani_mod_mic_array_data"
        	inverse="false" 
        	lazy="true" 
        	cascade="all-delete-orphan">        	
        	
        	<key column="abs_cancer_model_id"/>
        	<many-to-many column="micro_array_data_id"
            	unique="true"
            	class="MicroArrayData"/>
        </bag>
        
        <!-- xenograftCollection -->
        <!-- Note: the relationship between AnimalModel and Xenograft is modeled taking
             into effect the fact that both are children of the same parent, viz. AbstractCancerModel -->
        <bag name="xenograftCollection" 
        	inverse="false" 
        	lazy="true" 
        	cascade="all-delete-orphan">
        	
        	<key column="par_abs_can_model_id"/>
        	<one-to-many class="Xenograft"/>
        </bag>
        
        <!-- therapyCollection (one-to-many unidirectional) -->
        <bag name="therapyCollection"
        	table="animal_model_therapy" 
        	inverse="false" 
        	lazy="true" 
        	cascade="all-delete-orphan">
        	
        	<key column="abs_cancer_model_id"/>
        	<many-to-many column="therapy_id"
            	unique="true"
            	class="Therapy"/>
        </bag>              
        	
        <!-- geneDeliveryCollection (one-to-many unidirectional) -->
        <bag name="geneDeliveryCollection" 
        	table="ani_mod_gen_delivery"
        	inverse="false" 
        	lazy="true" 
        	cascade="all-delete-orphan">
        	
        	<key column="abs_cancer_model_id"/>
        	<many-to-many column="gene_delivery_id"
            	unique="true"
            	class="GeneDelivery"/>
        </bag> 
        
        <!-- animalAvailabilityCollection (one-to-many unidirectional) -->
        <bag name="animalAvailabilityCollection" 
        	table="ani_mod_ani_availability"
        	inverse="false" 
        	lazy="true" 
        	cascade="all-delete-orphan">
        	
        	<key column="abs_cancer_model_id"/>
        	<many-to-many column="animal_availability_id"
            	unique="true"
            	class="AnimalAvailability"/>
        </bag> 
        
        <!-- environmentalFactorCollection (one-to-many unidirectional) -->
        <bag name="environmentalFactorCollection" 
        	table="ani_mod_env_factor"
        	inverse="false" 
        	lazy="true" 
        	cascade="all-delete-orphan">
        	
        	<key column="abs_cancer_model_id"/>
        	<many-to-many column="env_factor_id"
            	unique="true"
            	class="EnvironmentalFactor"/>
        </bag>
        
        <!-- histopathologyCollection (one-to-many unidirectional) -->
        <bag name="histopathologyCollection" 
        	table="ani_mod_histopathology"
        	inverse="false" 
        	lazy="true" 
        	cascade="all-delete-orphan">
        	
        	<key column="abs_cancer_model_id"/>
        	<many-to-many column="histopathology_id"
            	unique="true"
            	class="Histopathology"/>
        </bag>
        
        <!-- engineeredGeneCollection (one-to-many unidirectional) -->
        <bag name="engineeredGeneCollection" 
        	table="ani_mod_engineered_gene"
        	inverse="false" 
        	lazy="true" 
        	cascade="all-delete-orphan">
        	
        	<key column="abs_cancer_model_id"/>
        	<many-to-many column="engineered_gene_id"
            	unique="true"
            	class="EngineeredGene"/>
        </bag>
        
        <!-- repositoryInfo (many-to-one unidirectional)-->
        <many-to-one
        	name="repositoryInfo"
        	column="repository_info_id"
        	cascade="save-update"
        	class="RepositoryInfo"/>       
        	
        <!-- phenotype (many-to-one unidirectional) -->
        <many-to-one
        	name="phenotype"
        	column="phenotype_id"
        	cascade="save-update"
        	class="Phenotype"/>   
	</subclass>
</hibernate-mapping>